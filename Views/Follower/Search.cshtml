@*@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers;*@

@model SearchViewModel;

<!-- BARRE DE RECHERCHE-->
<header id="searchBar">
	<div id="searchWrapper">
		<input id="search" type="text" placeholder="Search..." form="searchForm" />
		<img id="searchIcon" src="#" alt="" />
	</div>
</header>

<!-- FORMULAIRE DE RECHERCHE (HIDDEN PAR DEFAULT)-->
<form id="searchForm" action="/search/filter" method="get">

	@* Quel jeu est selectionne (change selon le nb de jeux dans la db) *@
	@for (int i = 0; i < Model.Criteria.GamesFilter.Count; i++)
	{
		<label>@Model.Criteria.GamesFilter.ElementAt(i).Key</label>
		<input type="hidden" name="GamesFilter[@i].Key" value="@Model.Criteria.GamesFilter.ElementAt(i).Key" />
		<input type="checkbox" name="GamesFilter[@i].Value" value="@Model.Criteria.GamesFilter.ElementAt(i).Value" onchange="this.value = this.checked"  />
		<input name="GamesFilter[@i].Value" type="hidden" value="false" />
	}

	@* Si c'est un favori (enum) *@
	<select name="FavoriteFilter">
		<option value="0">Peu importe</option>
		<option value="1">Non</option>
		<option value="2">Oui</option>
	</select>

	@* Le degre de protection du compagnion (enum) *@
	@Html.LabelFor(x => x.Criteria.ProtectionFilter)
	<input type="radio" name="ProtectionFilter" value="0" />
	<input type="radio" name="ProtectionFilter" value="1" />
	<input type="radio" name="ProtectionFilter" value="2" />
	<input type="radio" name="ProtectionFilter" value="3" />
</form>

<!-- LISTE DES COMPAGNIONS-->
<section id="cardsWrapper" data-color="red">
	@foreach (Follower follower in Model.Results)
	{
		<button class="follower link" data-href="/details/@follower.Id" autofocus>
			<img class="thumbnail" src="/images/games/@(follower.Parent.ShortName)/followers/@(follower.ShortName)/thumbnail.jpg" />
			<div class="container">
				<div class="primaryinfo">
					<img class="gamelogo" src="/images/games/@(follower.Parent.ShortName)/logo.png" />
					<h2>@follower.Name</h2>
				</div>

				<div class="secondaryinfo">
					@if (follower.IsFavorite)
					{
						<img src="~/images/shared/attributes/favorite.png" />
					}
					@if (follower.IsEssential)
					{
						<img src="~/images/shared/attributes/essential.png" />
					}
					@if (follower.DoesRespawn)
					{
						<img src="~/images/shared/attributes/respawns.png" />
					}
				</div>
			</div>
		</button>
	}
</section>

<!-- CITATIONS ALEATOIRES -->
<footer id="quotesBar">
	<blockquote>TODO Using ViewModel</blockquote>
</footer>
